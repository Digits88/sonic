<!-- 
    Author: Mike Newell Â© 2012
-->
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <script>
            (function($) {
                $(window).load(function() {
                    
                    // variables
                    var video = $('#video')[0];
                    var timeUpdate;
                    
                    // events
                    $(window).on('keydown', function(evt) {
                        if(evt.keyCode == 32) {
                            evt.preventDefault();
                            spacebar(evt);
                            
                        }
                    });
                    
                    // helpers
                    var spacebar = function(evt) {

                        // generate a random num
                        var rand = Math.floor((Math.random()*3)+1);;
                        
                        console.log(rand);
                        
                        // skip to random point in video
                        switch(rand) {
                            case 1:
                                console.dir(video);
                                video.currentTime = 0;
                                setEndSegmentListener(3);
                                video.play();
                                break;
                            case 2:
                                console.dir(video);
                                video.currentTime = 3;
                                setEndSegmentListener(6);
                                video.play();
                                break;
                            case 3:
                                console.dir(video);
                                video.currentTime = 17;
                                setEndSegmentListener(21);
                                video.play();
                                break;
                        }
                        
                    };
                    
                    var setEndSegmentListener = function(endTime) {
                        timeUpdate = video.addEventListener('timeupdate', function(e) {
                            console.log("in addeventlistener, e:" + Math.floor(e.target.currentTime) + " endTime " + endTime);
                            if(Math.floor(e.target.currentTime) == endTime) {
                                console.log("in if statement");
                                video.pause();
                                this.removeEventListener('timeupdate', arguments.callee, false);
                            }
                        }, false);
                    };
                    
                });
            })(jQuery);
        </script>
    </head>
    <body>
        <div id="wrap">
            <video id="video" width="1024" height="576" controls="controls">
                <source src="videos/guys.mp4" type="video/mp4">
                <source src="videos/guys.ogv" type="video/ogg">
                <source src="videos/guys.webm" type="video/webm">
                Your browser does not support the video tag.
            </video>
        </div>
    </body>
</html>
